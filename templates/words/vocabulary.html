{% extends 'base_01.html' %}

{% block head %}
<!-- Bootstrap CSS -->

<style>
    .voca{
    background : hwb(195 1% 3%);
    }

    .voca01{
    background : #ccebe8;
    }

    .box-container {
    display: flex;
    }

    .ma {
        width: 500px;
        margin-left: 50px;
        margin-right: 500px;
    }

    .ma_01 {
        margin-right: 100px;
    }


</style>
{% endblock %}

{% block base_content %}
<h2>{{ request.user.username }}의 단어장</h2>

<!-- 필터 옵션 -->
<form method="GET" action="{% url 'words:filtered_vocab' %}">
    <label for="topic_id">주제 선택:</label>
    <select name="topic_id">
        <option value="">모든 주제</option>
        {% for topic in topics %}
            <option value="{{ topic.id }}">{{ topic.main_topic }}</option>
        {% endfor %}
    </select>

    <label for="difficulty">난이도 선택:</label>
    <select name="difficulty">
        <option value="">모든 난이도</option>
        {% for key, value in difficulty_choices %}
            <option value="{{ key }}">{{ value }}</option>
        {% endfor %}
    </select>

    <button type="submit">필터 적용</button>
</form>
    <div class="box-container">
        <div class="ma">
            <!-- 단어 목록 -->
            {% for vocab in vocabulary %}
                <p class="voca">단어 : {{ vocab.word.word }}</p>
                <p class="voca01">뜻&nbsp&nbsp&nbsp&nbsp: {{ vocab.word.definition }}</p>
                
                <!-- 단어 삭제 기능 -->
                <form method="POST" action="{% url 'words:delete_vocab' vocab.id %}">
                    {% csrf_token %}
                </form>
                
                    <!-- 삭제 버튼 (모달 트리거) -->
                    <button class="btn btn-danger btn-sm" data-toggle="modal" data-target="#delete_modal_{{ vocab.id }}">삭제</button>

                    <!-- 삭제 모달 -->
                    <div id="delete_modal_{{ vocab.id }}" class="modal fade" tabindex="-1" role="dialog">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">삭제 경고</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <p>이 단어를 삭제하시겠습니까?</p>
                                </div>
                                <div class="modal-footer">
                                    <form id="deleteForm_{{ vocab.id }}" method="POST" action="{% url 'words:delete_vocab' vocab.id %}">
                                        {% csrf_token %}
                                        <button type="submit" class="btn btn-danger">삭제하기</button>
                                        <button type="button" class="btn btn-light" data-dismiss="modal">취소하기</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
            {% endfor %}
        </div>
        <div class="ma_01">
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div>
                    <label>메 모 장</label>
                    <textarea name="content" cols="50" rows="40"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">작성</button>
            </form>
        </div>
    </div>
    
               

    <!-- Bootstrap JavaScript and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

{% endblock %}